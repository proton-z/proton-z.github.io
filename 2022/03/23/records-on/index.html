

<!DOCTYPE html>
<html lang="zh-CN" data-default-color-scheme=light>



<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/img/favicon.png">
  <link rel="icon" href="/img/favicon.png">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#333333">
  <meta name="description" content="这一切都是stein;gates的选择吧">
  <meta name="author" content="Imitators">
  <meta name="keywords" content="">
  <meta name="description" content="Records on   妄图使用数学方法解决组合问题的的人类，   悔改吧,组合意义蕴含的能量远超你想象  实际上，如同 title 所说的，从现在开始，将要开始记录。  也正如那些古老的石碑，存在的意义不是证明，而只是记录   属于我的故事开始了。    img  2022-3-24 T1 发现了，如果是合法解的话，那么一定可以拆分成下图这样的。">
<meta property="og:type" content="article">
<meta property="og:title" content="records on">
<meta property="og:url" content="https://proton-z.github.io/2022/03/23/records-on/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description" content="Records on   妄图使用数学方法解决组合问题的的人类，   悔改吧,组合意义蕴含的能量远超你想象  实际上，如同 title 所说的，从现在开始，将要开始记录。  也正如那些古老的石碑，存在的意义不是证明，而只是记录   属于我的故事开始了。    img  2022-3-24 T1 发现了，如果是合法解的话，那么一定可以拆分成下图这样的。">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://proton-z.github.io/img/2022-03-25-1.png">
<meta property="article:published_time" content="2022-03-23T04:36:10.829Z">
<meta property="article:modified_time" content="2022-05-07T11:49:36.344Z">
<meta property="article:author" content="Imitators">
<meta property="article:tag" content="record">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="https://proton-z.github.io/img/2022-03-25-1.png">
  
  <title>records on - Hexo</title>

  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" />


  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/github-markdown-css@4.0.0/github-markdown.min.css" />
  <link  rel="stylesheet" href="/lib/hint/hint.min.css" />

  
    
    
      
      <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@10.4.0/styles/color-brewer.min.css" />
    
  

  
    <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css" />
  


<!-- 主题依赖的图标库，不要自行修改 -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_ba1fz6golrf.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_kmeydafke9r.css">


<link  rel="stylesheet" href="/css/main.css" />

<!-- 自定义样式保持在最底部 -->


  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    var CONFIG = {"hostname":"proton-z.github.io","root":"/","version":"1.8.12","typing":{"enable":true,"typeSpeed":70,"cursorChar":"_","loop":false},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"right","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"copy_btn":true,"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":false,"baidu":null,"google":null,"gtag":null,"tencent":{"sid":null,"cid":null},"woyaola":null,"cnzz":null,"leancloud":{"app_id":null,"app_key":null,"server_url":null,"path":"window.location.pathname"}},"search_path":"/local-search.xml"};
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
<meta name="generator" content="Hexo 5.4.2"></head>


<body>
  <header style="height: 90vh;">
    <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand" href="/">
      <strong>My blog</strong>
    </a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/">
                <i class="iconfont icon-home-fill"></i>
                首页
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/">
                <i class="iconfont icon-archive-fill"></i>
                归档
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/">
                <i class="iconfont icon-category-fill"></i>
                分类
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/">
                <i class="iconfont icon-tags-fill"></i>
                标签
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/">
                <i class="iconfont icon-user-fill"></i>
                关于
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/links/">
                <i class="iconfont icon-link-fill"></i>
                友链
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">
              &nbsp;<i class="iconfont icon-search"></i>&nbsp;
            </a>
          </li>
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">&nbsp;<i
                class="iconfont icon-dark" id="color-toggle-icon"></i>&nbsp;</a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

    <div class="banner" id="banner" parallax=true
         style="background: url('https://cdn.jsdelivr.net/gh/proton-z/cdn@3.1/2233/wallhaven-965ook.jpg') no-repeat center center;
           background-size: cover;">
      <div class="full-bg-img">
        <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
          <div class="page-header text-center fade-in-up">
            <span class="h2" id="subtitle" title="records on">
              
            </span>

            
              <div class="mt-3">
  
  
    <span class="post-meta">
      <i class="iconfont icon-date-fill" aria-hidden="true"></i>
      <time datetime="2022-03-23 12:36" pubdate>
        星期三, 三月 23日 2022, 12:36 下午
      </time>
    </span>
  
</div>

<div class="mt-1">
  
    <span class="post-meta mr-2">
      <i class="iconfont icon-chart"></i>
      7k 字
    </span>
  

  
    <span class="post-meta mr-2">
      <i class="iconfont icon-clock-fill"></i>
      
      
      22 分钟
    </span>
  

  
  
</div>

            
          </div>

          
            <div class="scroll-down-bar">
              <i class="iconfont icon-arrowdown"></i>
            </div>
          
        </div>
      </div>
    </div>
  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="d-none d-lg-block col-lg-2"></div>
    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div class="py-5" id="board">
          <article class="post-content mx-auto">
            <!-- SEO header -->
            <h1 style="display: none">records on</h1>
            
            <div class="markdown-body">
              <center>
Records on
</center>
<center>
妄图使用数学方法解决组合问题的的人类，
</center>
<center>
悔改吧,组合意义蕴含的能量远超你想象
</center>
<p>实际上，如同 title 所说的，从现在开始，将要开始记录。</p>
<center>
也正如那些古老的石碑，存在的意义不是证明，而只是记录
</center>
<center>
属于我的故事开始了。
</center>
<figure>
<img
src="https://cdn.jsdelivr.net/gh/proton-z/cdn@3.1/2233/wallhaven-z83o6y.jpg" srcset="/img/loading.gif" lazyload
alt="img" />
<figcaption aria-hidden="true">img</figcaption>
</figure>
<p>2022-3-24</p>
<p><a target="_blank" rel="noopener" href="http://47.92.197.167:5283/contest/175/problem/1">T1</a></p>
<p>发现了，如果是合法解的话，那么一定可以拆分成下图这样的。</p>
<figure>
<img src="\img\2022-03-25-1.png" srcset="/img/loading.gif" lazyload alt="img2" />
<figcaption aria-hidden="true">img2</figcaption>
</figure>
<p>后面的可以随便×个 <span class="math inline">\(2^k\)</span>。</p>
<p>前面要求那个不到 <span class="math inline">\(0\)</span> 的子序列
<span class="math inline">\(B\)</span> 要大于后面最大的。</p>
<p>其实后面的我们可以直接看成 <span class="math inline">\(B\)</span>
把后面的全连起来了。</p>
<p>然后首先考虑怎么求，能划分成两个下降子序列的排列的个数。</p>
<p><strong>往后面加数真的不是很容易，那么不妨考虑按值域枚举，一个一个插入。这个很关键。</strong></p>
<p>这样，你考虑一下最后一个数能插到的地方，显然是一个连续段，所以不妨设dp状态。</p>
<p><span class="math inline">\(f_{i,j}\)</span> 表示插入了 <span
class="math inline">\(i\)</span> 个，产生的最后连续段长度是 <span
class="math inline">\(j\)</span>。你会发现我们如果向最后插入，我们钦定了第一个子序列必须选。</p>
<p>所以转移 <span class="math inline">\(f_{i,j}=\sum f_{i-1,k},k\geq
j-1\)</span>。</p>
<p>所以化成后缀和，就变成了组合数（卡特兰），就完事了。</p>
<p>2022-3-24 这个codeforces
感觉挺可惜的，但实际上我觉得主要还是自己没有特别熟悉cf，找一找手感，估计会好起来的。</p>
<p>训练量太少了。</p>
<p>怎么就突然 2022-3-27了。。。。。</p>
<p>2022-3-25 的 T3</p>
<p><strong>题目大意</strong>：一个树有两种颜色，每次修改操作为：一个颜色连通块+w,翻转一个点的颜色，链，子树+w，以及询问x所在连通块max。</p>
<p>和我最开始的预期差不多，链和子树可以轻易的使用重链剖分解决。</p>
<p>那么思考一下如何颜色相同连通块+,求max。</p>
<p>我们可以发现，对于一个树连通块，一定有一个顶点，那么所有修改的点都是这个点子树内的。</p>
<p>当然除了一些异色点分开了一些子树的话。</p>
<p>现在我们需要思考如何刻画在同一个联通块内的。</p>
<p>可以发现就是这个点到根异色点个数，就能很好描述这件事。</p>
<p>实际上，我们需要在x的子树内，将num等于num[x]的点全部修改。</p>
<p>这样我们本质上 [sz[x],sz[x]+dfn[x]-1]
上内的num[x]=num[v]的v进行修改。</p>
<p>这是不好改的，但是你发现 num[x]=num[v] 本质上也就是 num[x]=min。</p>
<p>这样是可以做的，但是注意我们一九需要 修改num[x]
所以我们pushdown的时候改变一下策略，先把 num 的tag
pushdown这样可以保证现在p的num，和son[p] 的num是绝对正确的。</p>
<p>反过来想如果这个有tag的话，那么说明这个区间自从打tag开始就没有被修改了。</p>
<p>这么做的正确性便有了保障。</p>
<p>和xsy上一道题很像。。。。</p>
<hr />
<p>约数的根号和？</p>
<p>这个大概就可以分析，因为sqrt积性，显然。。。 <span
class="math display">\[
\begin{aligned}
\prod_i\sum_{j\leq a_i}(\sqrt
{p^j})&lt;\prod_{i}\frac{\sqrt{p^{a_i+1}}}{\sqrt{p}-1}=\sqrt n\prod
\frac{\sqrt{p}}{\sqrt p-1}\\
\end{aligned}
\]</span> 后面那个不是很会分析/kk,按照邓老师说的可能是（？）<span
class="math inline">\(\mathrm{polylog}\)</span> 级别的？</p>
<hr />
<p><a target="_blank" rel="noopener" href="https://www.luogu.com.cn/problem/P2081">迷失游乐园</a></p>
<p>挺水的，大概树和基环树唯一差别，只是多了一条可能有贡献的边。</p>
<p>我们就枚举这个边的贡献，完事了，simple 换根dp......其实挺复杂的。</p>
<p><a target="_blank" rel="noopener" href="http://47.92.197.167:5283/contest/180">2022-4-5</a></p>
<p>T3 很简单 f就是卡特兰，然后问你让 <span
class="math inline">\(\binom{2n}{n}\)</span> 的 <span
class="math inline">\(7\)</span> 因子最大化。</p>
<p>我们都知道 <span class="math inline">\(\binom{n}{m}\)</span> 的 <span
class="math inline">\(p\)</span> 因子个数是 <span
class="math inline">\(n+(n-m)\)</span> <span
class="math inline">\(p\)</span> 进制下的进位数，所以换言之，我们要找到
<span class="math inline">\(l\leq x\leq r\)</span> 使得 <span
class="math inline">\(2x\)</span> 进位数最多。</p>
<p>你可以贪心找到 <span class="math inline">\(l,r\)</span>
的lcp后一位，接下来有两种选择。</p>
<ol type="1">
<li>xxxxxxx (<span class="math inline">\(l_k-1\)</span>)
666666666666666666666 这样的</li>
<li>xxxxxxx(<span
class="math inline">\(l_k\)</span>)3333333333333333333333334这样的</li>
</ol>
<p>我们考虑 1 是普遍都有的。</p>
<p>2需要我们在找到前缀3，看下一位是否&gt;=4。</p>
<p>比较卡我的地方是 高精度换进制。。。。。</p>
<p>复杂度 <span class="math inline">\(O(n^2/12)\)</span>
当然是12个压一位，然后mod 7 直接加起来%7即可了。</p>
<p>T2 是原题。</p>
<p>大概就是先写出dp：(<span class="math inline">\(f_{i,j}\)</span>
表示当你在i节点t时刻的最小期望长度) <span class="math display">\[
f_{i,j}=\min{(f_{0,0}+j,\sum_{y,l\leq s\leq r}f_{y,j+s}\times p)}
\]</span> 含义是当前状态你可以选择会到初始情况。也可以继续走下去。</p>
<p>不能dp的主要原因是 <span class="math inline">\(f_{0,0}\)</span>
很讨厌</p>
<p>然后这种题的思路就是你把 <span class="math inline">\(f_{0,0}\)</span>
看成类似主元的东东。然后你分析一下你的 如果你设 <span
class="math inline">\(x=f_{0,0}\)</span>，那么把转移的 <span
class="math inline">\(f_{0,0}\)</span>改成 <span
class="math inline">\(x\)</span> 后的,<span
class="math inline">\(f_{0,0}\)</span>
实际上是一个一次函数，实际上如果你考虑 所有 <span
class="math inline">\(\min\)</span> 的情况，他其实是一个直线取 min
也就是下凸壳。</p>
<p>我们实际上也是想解方程 <span class="math inline">\(F(x)=x\)</span>
这种的。你考虑实际含义只能有一个解，那么直线与凸壳交点也只能有一个了，可以二分。</p>
<p>T1</p>
<p>。。。。我竟然忘记了点分治。</p>
<p>重写一下点分治用途，点分治可以将经过一个点的链，分成 <span
class="math inline">\(\log\)</span>
级别种。所以在处理链问题，点分治有奇效。。。</p>
<hr />
<p>2022-4-26？</p>
<p>待修改的整体二分？我们那就得按照时间来自然定序了，考虑的时候并不是cdq，当前我们找到了答案
<span class="math inline">\([l,r]\)</span> ，而操作时间区间为 <span
class="math inline">\([ql,qr]\)</span>，那么对于一个 <span
class="math inline">\(i\)</span> 询问，我们只考虑前面当前合法的 (<span
class="math inline">\([v_j\leq mid]\)</span>)
的算上贡献，如果此时贡献足够了说明进到左递归区间，那就直接进入。</p>
<p>如果不够那说明进入有区间，注意右区间的都是 <span
class="math inline">\(&gt;mid\)</span> 的此时必须将 <span
class="math inline">\(\leq mid\)</span>
贡献消去，并且由于天然的时间序，进入左侧的不可能也不应该贡献到这个询问。。</p>
<hr />
<p>4-10</p>
<p><a
target="_blank" rel="noopener" href="https://www.luogu.com.cn/problem/solution/P7949">左方之地</a></p>
<p>这个题，，主要的key是你看到有K个不同要第一时间想起差分。</p>
<p>没错，现在变成每次 <span class="math inline">\(\text{xor}\)</span>
一个 <span class="math inline">\(\text{popcount}=k\)</span> 的数。</p>
<p>所有数都可以被表示成 一个集合 <span class="math inline">\(S\)</span>
，<span class="math inline">\(x=\sum_{z\in S}\oplus
z\)</span>。现在是想便利这 <span class="math inline">\(2^n\)</span>
个状态，是每一次只改变一个。</p>
<p>倍增构造即可，本质上实在k维空间便利，你画一画三位什么的就容易了。</p>
<p>[ZJOI2010] 排列计数</p>
<p>我们容易建出一颗限制的树。这是一个二叉树。，可以发现一个点的左子树右子树是无关的，所以限制在一个点合并两个子树，实际上就是有标号合并。如果发现这点dp显然了。</p>
<hr />
<p>[SCOI2010]幸运数字</p>
<p>其实一眼容斥，我们实际上就是找出 <span class="math inline">\(S\subset
U,\mathrm{lcm}(S)\)</span> 这种东西。</p>
<p>实际上幸运数字是 <span class="math inline">\(O(2^l)\)</span>
级别的。</p>
<p>这个只是分析，并不严谨的放缩，为我们先假设 <span
class="math inline">\(lcm(a,b)=a\times
b\)</span>，那么我们设这个集合里的串的长度和大概和 <span
class="math inline">\(n\)</span> 差不多，所以实际上，合法的 <span
class="math inline">\(lcm(S)\)</span>
的个数是类似划分数的，很少的。并且我们对于一种划分方式，我们构造出来的也只不过是
<span class="math inline">\(2^{l_i}\)</span>
这种的。所以容斥其实复杂度可以接受，</p>
<p>现在我们只需要找出这些 <span class="math inline">\(lcm(S)\)</span>
这个复杂度，就很迷惑了，不好分析，通过一些不那么优秀的爆搜，也可以看出实际上我们需要的
<span class="math inline">\(lcm(S)\)</span> 甚至只有 <span
class="math inline">\(10^4,10^5\)</span> 左右的。</p>
<p>但是并没有题解给出非爆搜做法，我也并不会别的非爆搜做法，，，</p>
<p>所以只能爆搜了，。。。。爆搜最重要的trick 是，你要枚举一个上升序列
<span class="math inline">\(\prod a_i&lt;n\)</span>
你不如枚举一个下降序列 <span class="math inline">\(\prod
a_i&lt;n\)</span>
，原因是你合法的时候代价一样，不合法的时候，对于一个状态肯定是前缀更有可能
<span class="math inline">\(&gt;n\)</span> ，所以要倒着枚举。</p>
<hr />
<p><a target="_blank" rel="noopener" href="https://loj.ac/p/6358">#6358. 前夕</a></p>
<p>这个题一言难尽呀。</p>
<p>我其实不是很认可一些”理所当然“的二项式反演。</p>
<p>所以给出一种更加复杂的做法。。。很拉。</p>
<p>首先我们肯定是要做 <span class="math inline">\(n\)</span>
个元素的集合，交集大小是<span class="math inline">\(m\)</span>
的个数，我们可以选出 <span class="math inline">\(m\)</span>
个地方，然后问题变成了 <span class="math inline">\(n-m\)</span>
个元素的集合，交集大小是 <span class="math inline">\(0\)</span>
的选几个方案个数。 <span class="math display">\[
f_n=2^{2^n}-1-\sum_{i\leq n}\binom{n}{i}f_{n-i}
\]</span> 值得注意的是 <span class="math inline">\(2^{2^n}\)</span>
要减去1，也就是空集情况。含义就是简单的容斥。</p>
<p>这么求解下去肯定是没出路的，显然移项然后二项式反演。</p>
<p>简单推导得到 ： <span class="math display">\[
f_n=\sum_{i\leq n} \binom{n}{i}(-1)^{n-i}(2^{2^i}-1)
\]</span> 然后问题变成 <span class="math inline">\(4\mid i\)</span>
的求解，也不难想到单位根反演。</p>
<p><span class="math inline">\(2^{2^i}-1\)</span>
形式很烂，但是我们发现有 <span class="math inline">\(-1\)</span>
的轮换系数，实际上实在抵消的。（当然在 <span
class="math inline">\(n=0\)</span> 并不会抵消，伏笔 ）</p>
<p>写出式子： <span class="math display">\[
\begin{aligned}
\sum_{i\leq n,4\mid n-i}\binom{n}{i}\sum_{j\leq i}
\binom{i}{j}(-1)^{i-j}2^{2^j}\\
\sum_{i\leq n}\sum_{1\leq t\leq
3}\epsilon^{t(n-i)}\binom{n}{i}\sum_{j\leq i}
\binom{i}{j}(-1)^{i-j}2^{2^j}\\
\sum_{1\leq t\leq 3}\sum_{j\leq n}2^{2^j}\sum_{i\geq j}\binom{n}{i}
\binom{i}{j}(-1)^{i-j}\epsilon^{t(n-i)}\\
\sum_{1\leq t\leq 3}\sum_{j\leq n}2^{2^j}\sum_{i\leq n-j}\binom{n}{i+j}
\binom{i+j}{j}(-1)^{i}\epsilon^{t(n-i-j)}\\
\sum_{1\leq t\leq 3}\sum_{j\leq n}2^{2^j}\binom{n}{j}\sum_{i\leq
n-j}\binom{n-j}{i} (-1)^{i}\epsilon^{t(n-i-j)}\\
\sum_{1\leq t\leq 3}\sum_{j\leq
n}2^{2^j}\epsilon^{t(n-j)}\binom{n}{j}((-\epsilon^{-t}){^{i}}+1)^{n-j}\\
\end{aligned}
\]</span> <span class="math inline">\(O(n)\)</span> 计算即可，实际上这个
<span class="math inline">\(\epsilon\)</span> 就是 <span
class="math inline">\(\mathrm{i}\)</span> ，或者说是 <span
class="math inline">\(-1\)</span> 在 <span class="math inline">\(\bmod
998244353\)</span> 下的平方根。原根pow一下就好。</p>
<hr />
<p>2022-4-11 模拟赛</p>
<p>T2 简单的 min25筛，<span class="math inline">\(\mathrm
{minp}\)</span> 这个转移只有两条边，一种直接 <span
class="math inline">\(\times\phi\)</span> ,一种加上 <span
class="math inline">\(\sigma_1\)</span>，直接维护两个东东就好了。</p>
<p>P.S. 递推版的min25确实慢死，我甚至怀疑他是不是 <span
class="math inline">\(\mathrm{soft }\ O(n^{3/4})\)</span>
什么的。。。</p>
<p>所以不如直接爆搜。。。。</p>
<p>T1 我觉得有点难？</p>
<p>排列很好说，我都看出来了逆序对是偶数是充要的，然后序列你就考虑你先把这个东西看成排列（重标号），如果本身就是偶数，必然合法，如果是奇数，也很简单，你进行一次移动
<span class="math inline">\(ab\)</span> 但是经过 <span
class="math inline">\(a\)</span> 这种，你会发现此时逆序对
-1（1,1移动后不会贡献），所以不难发现序列一定有解。</p>
<p>没想出来本质上就是没看出来性质。。。。。。主要是你要发现实际上挪动两个可以看成一步一步挪动这两个，然后实际上你只不过将一个移动两步，这样你可以类似冒泡那样，把前
<span class="math inline">\(n-2\)</span>
个冒泡排好序，那么也就剩下了最后那两个，得出逆序对为偶数，序列也好考虑类似上文那样。</p>
<p>剩下直接 dp 不易，但是别忘了你的系数有特点第 <span
class="math inline">\(i\)</span> 个数，只能填到 <span
class="math inline">\(i+1\)</span>
个位置，那么确定状态也简单了，你可以直接将空出的位置设入状态。</p>
<p>T3 鸽子了</p>
<p><span class="math inline">\(\tau\)</span></p>
<hr />
<h2 id="osu"><a
target="_blank" rel="noopener" href="http://www.accoders.com/problem.php?cid=2676&amp;pid=1">OSU</a></h2>
<p>首先拆开贡献，<span class="math inline">\(1\)</span> 自己一组，发现
<span class="math inline">\(L^2+L\)</span> 可以理解成 <span
class="math inline">\(L\)</span> 段内选 <span
class="math inline">\(i,j(i\leq j)\)</span> 的概率和。</p>
<p>所以问题转化为怎么算 <span class="math inline">\(w(i,j),([i,j]\subset
[l,r])\)</span>，其中 <span class="math inline">\(w(i,j)=\prod
p_k\)</span> 。</p>
<p>题解给出了矩阵维护这个东西。。。。。。。我觉得很神。</p>
<p>但是实际上，区间的子区间，，这个东西可以分治（线段树），考虑线段树怎么合并即可了（分治，左节点，右节点，跨块的（lsum,rsum））。</p>
<hr />
<h2 id="地震后的幻想乡"><a
target="_blank" rel="noopener" href="https://www.luogu.com.cn/problem/P3343">地震后的幻想乡</a></h2>
<p>先说我的另类解法。</p>
<p>首先我的转化是将期望转化为 概率，也就是最小生成树最大边 &lt;=x
的概率的和。</p>
<p>此时问题转化为了，对于 <span class="math inline">\(x\)</span>
,如果一条边权 <span class="math inline">\(\leq x\)</span>
保留，否则删掉，问最后联通的概率。</p>
<p>我是这样想的，实际上本质不同的联通情况是少的。</p>
<p>我大概就是在容斥，，首先加上系数 <span
class="math inline">\(\times\)</span> 钦定一个连通块的概率 加上 系数
<span class="math inline">\(\times\)</span>
钦定两个连通块的概率......</p>
<p>而钦定k个连通块的概率就是，把跨块的边只能是 [x,1] 所以贡献是 <span
class="math inline">\(x^{num}\)</span>。</p>
<p>所以我们枚举联通情况，维护出多项式，最后积分。</p>
<p>只剩下如何求容斥系数了。</p>
<table>
<thead>
<tr class="header">
<th style="text-align: center;">钦定的连通块个数</th>
<th style="text-align: center;">1</th>
<th style="text-align: center;">2</th>
<th style="text-align: center;">3</th>
<th style="text-align: center;">4</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">容斥系数</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">-1</td>
<td style="text-align: center;">2</td>
<td style="text-align: center;">-6</td>
</tr>
</tbody>
</table>
<p>可以看出是 <span
class="math inline">\((-1)^nn!\)</span>，我是考虑钦定为 <span
class="math inline">\(n\)</span> 的情况，会被 <span
class="math inline">\(\begin{bmatrix}n\\j\end{bmatrix}\)</span> 个钦定为
<span class="math inline">\(j\)</span> 的算贡献。</p>
<p>所以系数的递推式： <span class="math display">\[
\begin{aligned}
f_i=-\sum f_j\times s(i,j)\\
\end{aligned}
\]</span> 不会证明。。。可能是斯特林反演惊恐</p>
<hr />
<p>soulist做法。实际上和这个大同小异了。。。。。</p>
<p>我们要求出 <span class="math inline">\(\leq x\)</span>
的连通子图概率和。这个可以DP。</p>
<p>设 <span class="math inline">\(\mathrm{dp}(s,i)\)</span> <span
class="math inline">\(s\)</span> 表示和 <span
class="math inline">\(1\)</span> 联通的情况, <span
class="math inline">\(i\)</span> 表示这个状态选了几条边。</p>
<p>我们考虑容斥，先在 <span class="math inline">\(s\)</span>
这个集合随意选边 也就是 <span
class="math inline">\(\mathrm{dp(s,i)}\)</span> 初始化为 <span
class="math inline">\(\binom{edge(s)}{i}\)</span>。</p>
<p>然后枚举包含 <span class="math inline">\(1\)</span>
的极大集合，减去，其中补集边随意选即可。</p>
<hr />
<p>清新的厉害题 <a
target="_blank" rel="noopener" href="https://www.luogu.com.cn/problem/CF68D">cf68D</a></p>
<p>不知道怎么描述。。。就说这样一个“尽管我发现了但没做出来的”observation。</p>
<p>若 <span class="math inline">\(lv&lt;rv\)</span> 那么说明断 <span
class="math inline">\(ls\)</span> 边的答案可以确定了，只需要进一步考察断
<span class="math inline">\(rs\)</span> 边的答案。</p>
<p>反之同理，特别的 <span class="math inline">\(lv=rv\)</span>
说明无论断 <span class="math inline">\(ls\)</span> 还是 <span
class="math inline">\(rs\)</span> 答案都知道了。</p>
<p>这样随意维护课做到 查询 <span class="math inline">\(O(h^2)\)</span>
的复杂度。。。。。</p>
<hr />
<p>入门DS题 <a target="_blank" rel="noopener" href="https://hydro.ac/d/bzoj/p/3489">simple rmq</a></p>
<p>看了题解。。。。首先，经典套路是维护每一个 <span
class="math inline">\(r\)</span> 结尾的答案。</p>
<p>考虑一个 <span class="math inline">\(x_i\)</span> 有贡献的区间是
<span class="math inline">\([pre_i+1,i]\)</span>
这样的区间。当然我们需要下一个 等于 <span
class="math inline">\(x_i\)</span> 的数出现时删掉贡献。</p>
<p>出现的时间是一个区间。离线固然好直接时间分治。</p>
<p>在线吗，那就使用主席树记录一下每一个 <span
class="math inline">\(r\)</span>
的信息，然后区间修改什么的即可。（维护max,区间取 max 不用 seg
beats）</p>
<p>复杂度 <span class="math inline">\(O(n\log^2 n)\)</span>。</p>
<hr />
<p>随机游走相关。</p>
<ol type="1">
<li>设状态为到 <span class="math inline">\(x\)</span>
停止的期望长度，容易dp</li>
<li>如果可以一直走，然后有一个终止位置集合，那么概率可以设成所有时刻，在这个点的概率，这样，初始起点集合只需要
讲转移式子 <span class="math inline">\(+1\)</span> 就好。</li>
<li>网格图的主元法实际上，就是先进行了若干步“带入消元”，使得最后答案都表示成
主元向量的线性表示。</li>
</ol>
<hr />
<p>5,4 模拟赛 A</p>
<p>两个字符集 <span class="math inline">\(A,B,C\)</span>
然后相邻不同的长度 <span class="math inline">\(2n+1\)</span> 串使 lcs
=n。</p>
<p>主要你要发现，两个长度为2的区间是一定有相同的字符的。</p>
<p>然后你大概能猜到，这样来说，存在下阶 <span
class="math inline">\(n\)</span> 。</p>
<p>然后就是如何构造的问题了。打个表，构造构造就好了。</p>
<p>难点在于 发现下界，以及实现上。</p>
<p>模拟赛B</p>
<p>不是很会。。。。。。。。。。。。。。。。</p>
<p>首先不是很懂为啥要这么考虑，，，，，，感觉很神</p>
<p>就是考虑 <span class="math inline">\(x\)</span>,<span
class="math inline">\(y\)</span>
对<strong>不合法</strong>区间的贡献。</p>
<p>就是把 z=lca
找出来，然后分讨不合法区间是什么，实际上就是矩形覆盖矩形查1.</p>
<p>然后这个矩形覆盖有特性的，他是接地，和接左的 3-side矩形。</p>
<p>具体问题的话，子区间就很烦，所以转化成对一维进行”扫描线“，每时每刻维护线段树，下标
<span class="math inline">\(i\)</span> 的含义是以 <span
class="math inline">\(i\)</span> 为左端点，切右端点<span
class="math inline">\(\leq T\)</span> 的区间的答案。</p>
<p>不难发现此时询问变成了对上述线段树的区间询问。</p>
<p>那么如何维护线段树呢，实际上由于 3-side
，一种矩形可以逆着扫，然后变成区间覆盖类似的东西（因为不可能改变了）。每次只给没被覆盖的点加
1 的权值。</p>
<p>另外一种矩形由于有一side接左，所以有贡献的区间一定是一段前缀，这个维护最下面边，然后线段树二分即可。</p>
<p>现在就剩一个问题了，那我们 <span class="math inline">\(n^2\)</span>
个区间怎么搞。</p>
<p>可以在 <span class="math inline">\(z\)</span> 统计 <span
class="math inline">\(x,y\)</span> 的贡献。经典dsu on
tree，你可以真的启发式合并，然后枚举小的，然后统计大的贡献。</p>
<p>这样区间个数也是 <span class="math inline">\(O(n\log n)\)</span>
的。能做了。</p>
<hr />
<center>
新航线
</center>
<p>好疲惫</p>

            </div>
            <hr>
            <div>
              <div class="post-metas mb-3">
                
                
                  <div class="post-meta">
                    <i class="iconfont icon-tags"></i>
                    
                      <a class="hover-with-bg" href="/tags/record/">record</a>
                    
                  </div>
                
              </div>
              
                <p class="note note-warning">
                  
                    本博客所有文章除特别声明外，均采用 <a target="_blank" href="https://creativecommons.org/licenses/by-sa/4.0/deed.zh" rel="nofollow noopener noopener">CC BY-SA 4.0 协议</a> ，转载请注明出处！
                  
                </p>
              
              
                <div class="post-prevnext">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/2022/04/11/lgv-matrixtree-simple-thought/">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">lgv引理矩阵树</span>
                        <span class="visible-mobile">上一篇</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/2022/02/11/2-21-pack/">
                        <span class="hidden-mobile">模拟赛补题解</span>
                        <span class="visible-mobile">下一篇</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
              <!-- Comments -->
              <article class="comments" id="comments" lazyload>
                
                  
                
                
  <div id="valine"></div>
  <script type="text/javascript">
    Fluid.utils.loadComments('#valine', function() {
      Fluid.utils.createScript('https://cdn.jsdelivr.net/npm/valine@1.4.14/dist/Valine.min.js', function() {
        var options = Object.assign(
          {"appId":"zDYcdMTHlyhvs0B9reABGqm3-gzGzoHsz","appKey":"DlH5PmKDEOPuptEFP5FxLc7C","path":"window.location.pathname","placeholder":"欢迎评论(￣▽￣)/////","avatar":"retro","meta":["nick","mail","link"],"requiredFields":[],"pageSize":10,"lang":"zh-CN","highlight":true,"recordIP":true,"serverURLs":null,"emojiCDN":null,"emojiMaps":null,"enableQQ":false,"appid":"zDYcdMTHlyhvs0B9reABGqm3-gzGzoHsz","appkey":"DlH5PmKDEOPuptEFP5FxLc7C"},
          {
            el: "#valine",
            path: window.location.pathname
          }
        )
        new Valine(options);
        Fluid.utils.waitElementVisible('#valine .vcontent', () => {
          Fluid.plugins.initFancyBox('#valine .vcontent img:not(.vemoji)');
        })
      });
    });
  </script>
  <noscript>Please enable JavaScript to view the comments</noscript>


              </article>
            
          </article>
        </div>
      </div>
    </div>
    
      <div class="d-none d-lg-block col-lg-2 toc-container" id="toc-ctn">
        <div id="toc">
  <p class="toc-header"><i class="iconfont icon-list"></i>&nbsp;目录</p>
  <div class="toc-body" id="toc-body"></div>
</div>

      </div>
    
  </div>
</div>

<!-- Custom -->


    

    
      <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">搜索</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v"
                 for="local-search-input">关键词</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>
    

    
  </main>

  <footer class="text-center mt-5 py-3">
  <div class="footer-content">
     <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a> 
  </div>
  

  

  
</footer>


  <!-- SCRIPTS -->
  
  <script  src="https://cdn.jsdelivr.net/npm/nprogress@0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/nprogress@0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js" ></script>
<script  src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>

<!-- Plugins -->


  <script  src="/js/local-search.js" ></script>



  
    <script  src="/js/img-lazyload.js" ></script>
  



  



  
    <script  src="https://cdn.jsdelivr.net/npm/tocbot@4.12.0/dist/tocbot.min.js" ></script>
  
  
    <script  src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js" ></script>
  
  
    <script  src="https://cdn.jsdelivr.net/npm/anchor-js@4.3.0/anchor.min.js" ></script>
  
  
    <script defer src="https://cdn.jsdelivr.net/npm/clipboard@2.0.6/dist/clipboard.min.js" ></script>
  






  <script  src="https://cdn.jsdelivr.net/npm/typed.js@2.0.11/lib/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var title = document.getElementById('subtitle').title;
      
      typing(title)
      
    })(window, document);
  </script>





  

  
    <!-- MathJax -->
    <script>
      MathJax = {
        tex: {
          inlineMath: [['$', '$'], ['\\(', '\\)']]
        },
        loader: {
          load: ['ui/lazy']
        },
        options: {
          renderActions: {
            findScript: [10, doc => {
              document.querySelectorAll('script[type^="math/tex"]').forEach(node => {
                const display = !!node.type.match(/; *mode=display/);
                const math = new doc.options.MathItem(node.textContent, doc.inputJax[0], display);
                const text = document.createTextNode('');
                node.parentNode.replaceChild(text, node);
                math.start = { node: text, delim: '', n: 0 };
                math.end = { node: text, delim: '', n: 0 };
                doc.math.push(math);
              });
            }, '', false],
            insertedScript: [200, () => {
              document.querySelectorAll('mjx-container').forEach(node => {
                let target = node.parentNode;
                if (target.nodeName.toLowerCase() === 'li') {
                  target.parentNode.classList.add('has-jax');
                }
              });
            }, '', false]
          }
        }
      };
    </script>

    <script async src="https://cdn.jsdelivr.net/npm/mathjax@3.2.0/es5/tex-svg.js" ></script>

  











<!-- 主题的启动项 保持在最底部 -->
<script  src="/js/boot.js" ></script>


</body>
</html>
